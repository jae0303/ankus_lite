var $jscomp={scope:{},findInternal:function(b,r,h){b instanceof String&&(b=String(b));for(var c=b.length,n=0;n<c;n++){var g=b[n];if(r.call(h,g,n,b))return{i:n,v:g}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,r,h){if(h.get||h.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[r]=h.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,r,h,c){if(r){h=$jscomp.global;b=b.split(".");for(c=0;c<b.length-1;c++){var n=b[c];n in h||(h[n]={});h=h[n]}b=b[b.length-1];c=h[b];r=r(c);r!=c&&null!=r&&$jscomp.defineProperty(h,b,{configurable:!0,writable:!0,value:r})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,h){return $jscomp.findInternal(this,b,h).v}},"es6-impl","es3");
(function(b){"function"===typeof define&&define.amd?define(["jquery","./grid.base"],b):"object"===typeof exports?b(require("jquery")):b(jQuery)})(function(b){var r=b.jgrid,h=b.fn.jqGrid;r.extend({groupingSetup:function(){return this.each(function(){var c,n;n=this.p;var g=n.colModel,a=n.groupingView,f,t,l=function(){return""};if(null===a||"object"!==typeof a&&!b.isFunction(a))n.grouping=!1;else if(a.groupField.length){void 0===a.visibiltyOnNextGrouping&&(a.visibiltyOnNextGrouping=[]);a.lastvalues=
[];a._locgr||(a.groups=[]);a.counters=[];for(c=0;c<a.groupField.length;c++)a.groupOrder[c]||(a.groupOrder[c]="asc"),a.groupText[c]||(a.groupText[c]="{0}"),"boolean"!==typeof a.groupColumnShow[c]&&(a.groupColumnShow[c]=!0),"boolean"!==typeof a.groupSummary[c]&&(a.groupSummary[c]=!1),a.groupSummaryPos[c]||(a.groupSummaryPos[c]="footer"),f=g[n.iColByName[a.groupField[c]]],!0===a.groupColumnShow[c]?(a.visibiltyOnNextGrouping[c]=!0,null!=f&&!0===f.hidden&&h.showCol.call(b(this),a.groupField[c])):(a.visibiltyOnNextGrouping[c]=
b("#"+r.jqID(n.id+"_"+a.groupField[c])).is(":visible"),null!=f&&!0!==f.hidden&&h.hideCol.call(b(this),a.groupField[c]));a.summary=[];a.hideFirstGroupCol&&(a.formatDisplayField[0]=function(a){return a});c=0;for(n=g.length;c<n;c++)f=g[c],a.hideFirstGroupCol&&!f.hidden&&a.groupField[0]===f.name&&(f.formatter=l),f.summaryType&&(t={nm:f.name,st:f.summaryType,v:"",sr:f.summaryRound,srt:f.summaryRoundType||"round"},f.summaryDivider&&(t.sd=f.summaryDivider,t.vd=""),a.summary.push(t))}else n.grouping=!1})},
groupingPrepare:function(c,n){this.each(function(){var g=this.p.groupingView,a=g.groups,f=g.counters,t=g.lastvalues,l=g.isInTheSameGroup,q=g.groupField.length,p,e,u,r,k,d,E=!1,D=h.groupingCalculations.handler;for(p=0;p<q;p++)if(r=g.groupField[p],e=g.displayField[p],k=c[r],d=null==e?null:c[e],null==d&&(d=k),void 0!==k){u=[];for(e=0;e<=p;e++)u.push(c[g.groupField[e]]);r={idx:p,dataIndex:r,value:k,displayValue:d,startRow:n,cnt:1,keys:u,summary:[]};0===n?(a.push(r),t[p]=k,e={cnt:1,pos:a.length-1,summary:b.extend(!0,
[],g.summary)},f[p]=e):(e={cnt:1,pos:a.length,summary:b.extend(!0,[],g.summary)},"object"===typeof k||(b.isArray(l)&&b.isFunction(l[p])?l[p].call(this,t[p],k,p,g):t[p]===k)?E?(a.push(r),t[p]=k,f[p]=e):(e=f[p],e.cnt+=1,a[e.pos].cnt=e.cnt):(a.push(r),t[p]=k,E=!0,f[p]=e));k=a[e.pos];var v;for(u=0;u<e.summary.length;u++)d=e.summary[u],v=b.isArray(d.st)?d.st[r.idx]:d.st,b.isFunction(v)?d.v=v.call(this,d.v,d.nm,c,r):(d.v=D.call(b(this),v,d.v,d.nm,d.sr,d.srt,c),"avg"===v.toLowerCase()&&d.sd&&(d.vd=D.call(b(this),
v,d.vd,d.sd,d.sr,d.srt,c)));k.summary=e.summary}});return this},groupingToggle:function(c,n){this.each(function(){var g=this.p,a=g.groupingView,f=a.minusicon,t=a.plusicon,l=n?b(n).closest("tr.jqgroup"):b("#"+r.jqID(c)),q,p,e=!0,h=!1,A=[],k=function(a){var b,c=a.length;for(b=0;b<c;b++)A.push(a[b])},d=parseInt(l.data("jqgrouplevel"),10);g.frozenColumns&&0<l.length&&(p=l[0].rowIndex,l=b(this.rows[p]),l=l.add(this.grid.fbRows[p]));q=l.find(">td>span.tree-wrap");r.hasAllClasses(q,f)?(q.removeClass(f).addClass(t),
h=!0):q.removeClass(t).addClass(f);for(l=l.next();l.length;l=l.next())if(l.hasClass("jqfoot"))if(q=parseInt(l.data("jqfootlevel"),10),h){if(q=parseInt(l.data("jqfootlevel"),10),(!a.showSummaryOnHide&&q===d||q>d)&&k(l),q<d)break}else{if((q===d||a.showSummaryOnHide&&q===d+1)&&k(l),q<=d)break}else if(l.hasClass("jqgroup"))if(q=parseInt(l.data("jqgrouplevel"),10),h){if(q<=d)break;k(l)}else{if(q<=d)break;q===d+1&&(l.find(">td>span.tree-wrap").removeClass(f).addClass(t),k(l));e=!1}else(h||e)&&k(l);b(A).css("display",
h?"none":"");g.frozenColumns&&b(this).triggerHandler("jqGridResetFrozenHeights",[{header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!1,body:{resizeDiv:!0,resizedRows:{iRowStart:p,iRowEnd:l.length?l[0].rowIndex-1:-1}}}]);this.fixScrollOffsetAndhBoxPadding();b(this).triggerHandler("jqGridGroupingClickGroup",[c,h]);b.isFunction(g.onClickGroup)&&g.onClickGroup.call(this,c,h)});return!1},groupingRender:function(c,n){function g(a,c,n,g,l){var m=v[a],d,h="",p,e,q,w=0,u,z,B,A=!0;if(0!==
c&&0!==v[a].idx)for(d=a;0<=d;d--)if(v[d].idx===v[a].idx-c){m=v[d];break}a=m.cnt;for(u=void 0===l?g:0;u<G;u++){c="&#160;";d=y[u];for(p=0;p<m.summary.length;p++)if(e=m.summary[p],z=b.isArray(e.st)?e.st[n.idx]:e.st,B=b.isArray(d.summaryTpl)?d.summaryTpl[n.idx]:d.summaryTpl||"{0}",e.nm===d.name){"string"===typeof z&&"avg"===z.toLowerCase()&&(e.sd&&e.vd?e.v/=e.vd:e.v&&0<a&&(e.v/=a));try{e.groupCount=m.cnt,e.groupIndex=m.dataIndex,e.groupValue=m.value,q=f.formatter("",e.v,u,e)}catch(K){q=e.v}c=r.format(B,
q);d.summaryFormat&&(c=d.summaryFormat.call(f,n,c,q,d,e));break}e=p=!1;void 0!==l&&A&&!d.hidden&&(c=l,A=!1,1<g&&(p=!0,w=g-1),e=d.align,d.align="rtl"===t.direction?"right":"left",k.iconColumnName=d.name);0<w&&!d.hidden&&"&#160;"===c?(e&&(d.align=e),w--):(h+="<td role='gridcell' "+f.formatCol(u,1,"")+(p?"colspan='"+g+"'":"")+">"+c+"</td>",e&&(d.align=e))}return h}var a="",f=this[0],t=f.p,l=0,q,p=[],e="",u,A,k=t.groupingView,d=b.makeArray(k.groupSummary),E=(k.groupCollapse?k.plusicon:k.minusicon)+" tree-wrap",
D=k.groupField.length,v=k.groups,y=t.colModel,G=y.length,F=t.page,H=h.getGuiStyles.call(f,"gridRow","jqgroup ui-row-"+t.direction),I=h.getGuiStyles.call(f,"gridRow","jqfoot ui-row-"+t.direction);b.each(y,function(a,c){var b;for(b=0;b<D;b++)if(k.groupField[b]===c.name){p[b]=a;break}});d.reverse();b.each(v,function(h,m){if(k._locgr&&!(m.startRow+m.cnt>(F-1)*n&&m.startRow<F*n))return!0;l++;A=t.id+"ghead_"+m.idx;u=A+"_"+h;e="<span style='cursor:pointer;margin-"+("rtl"===t.direction?"right:":"left:")+
12*m.idx+"px;' class='"+k.commonIconClass+" "+E+"' onclick=\"jQuery('#"+r.jqID(t.id).replace("\\","\\\\")+"').jqGrid('groupingToggle','"+u+"', this);return false;\"></span>";try{b.isArray(k.formatDisplayField)&&b.isFunction(k.formatDisplayField[m.idx])?(m.displayValue=k.formatDisplayField[m.idx].call(f,m.displayValue,m.value,y[p[m.idx]],m.idx,k),q=m.displayValue):q=f.formatter(u,m.displayValue,p[m.idx],m.value)}catch(J){q=m.displayValue}a+="<tr id='"+u+"' data-jqgrouplevel='"+m.idx+"' "+(k.groupCollapse&&
0<m.idx?"style='display:none;' ":"")+"role='row' class='"+H+" "+A+"'>";var w=b.isFunction(k.groupText[m.idx])?k.groupText[m.idx].call(f,q,m.cnt,m.summary):r.template(k.groupText[m.idx],q,m.cnt,m.summary),B,z,C,x;x=0;C=D-1===m.idx;"string"!==typeof w&&"number"!==typeof w&&(w=q);"header"===k.groupSummaryPos[m.idx]?(B=1,"cb"!==y[0].name&&"cb"!==y[1].name||B++,"subgrid"!==y[0].name&&"subgrid"!==y[1].name||B++,a+=g(h,0,m,B,e+"<span class='cell-wrapper'>"+w+"</span>")):a+="<td role='gridcell' style='padding-left:"+
12*m.idx+"px;' colspan='"+G+"'>"+e+w+"</td>";a+="</tr>";if(C){w=v[h+1];C=m.startRow;B=void 0!==w?w.startRow:v[h].startRow+v[h].cnt;k._locgr&&(x=(F-1)*n,x>m.startRow&&(C=x));for(;C<B&&c[C-x];C++)a+=c[C-x].join("");if("header"!==k.groupSummaryPos[m.idx]){if(void 0!==w){for(z=0;z<k.groupField.length&&w.dataIndex!==k.groupField[z];z++);l=k.groupField.length-z}for(x=0;x<l;x++)d[x]&&(a+="<tr data-jqfootlevel='"+(m.idx-x)+(k.groupCollapse&&(0<m.idx-x||!k.showSummaryOnHide)?"' style='display:none;'":"'")+
" role='row' class='"+I+"'>",a+=g(h,x,v[m.idx-x],0),a+="</tr>");l=z}}});this.unbind("jqGridShowHideCol.groupingRender").bind("jqGridShowHideCol.groupingRender",function(){var a=t.iColByName[k.iconColumnName],c,d,e;if(0<=b.inArray("header",k.groupSummaryPos)){for(c=0;c<y.length;c++)if(!y[c].hidden){e=c;break}if(void 0!==e&&a!==e){for(c=0;c<f.rows.length;c++)d=f.rows[c],b(d).hasClass("jqgroup")&&(b(d.cells[e]).html(d.cells[a].innerHTML),b(d.cells[a]).html("&nbsp;"));k.iconColumnName=y[e].name}}});return a},
groupingGroupBy:function(c,n){return this.each(function(){var g=this.p,a=g.groupingView,f,t;"string"===typeof c&&(c=[c]);g.grouping=!0;a._locgr=!1;void 0===a.visibiltyOnNextGrouping&&(a.visibiltyOnNextGrouping=[]);for(f=0;f<a.groupField.length;f++)t=g.colModel[g.iColByName[a.groupField[f]]],!a.groupColumnShow[f]&&a.visibiltyOnNextGrouping[f]&&null!=t&&!0===t.hidden&&h.showCol.call(b(this),a.groupField[f]);for(f=0;f<c.length;f++)a.visibiltyOnNextGrouping[f]=b(g.idSel+"_"+r.jqID(c[f])).is(":visible");
g.groupingView=b.extend(g.groupingView,n||{});a.groupField=c;b(this).trigger("reloadGrid")})},groupingRemove:function(c){return this.each(function(){var n=this.p,g=this.tBodies[0],a=n.groupingView;void 0===c&&(c=!0);n.grouping=!1;if(!0===c){for(n=0;n<a.groupField.length;n++)!a.groupColumnShow[n]&&a.visibiltyOnNextGrouping[n]&&h.showCol.call(b(this),a.groupField);b("tr.jqgroup, tr.jqfoot",g).remove();b("tr.jqgrow",g).filter(":hidden").show()}else b(this).trigger("reloadGrid")})},groupingCalculations:{handler:function(c,
b,g,a,f,h){var l={sum:function(){return parseFloat(b||0)+parseFloat(h[g]||0)},min:function(){return""===b?parseFloat(h[g]||0):Math.min(parseFloat(b),parseFloat(h[g]||0))},max:function(){return""===b?parseFloat(h[g]||0):Math.max(parseFloat(b),parseFloat(h[g]||0))},count:function(){""===b&&(b=0);return h.hasOwnProperty(g)?b+1:0},avg:function(){return l.sum()}};if(!l[c])throw"jqGrid Grouping No such method: "+c;c=l[c]();null!=a&&("fixed"===f?c=c.toFixed(a):(a=Math.pow(10,a),c=Math.round(c*a)/a));return c}}})});
//# sourceMappingURL=grid.grouping.map
